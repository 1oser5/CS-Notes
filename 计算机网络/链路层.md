# 链路层

## 主要功能

在两个网络实体之间提供数据链路层连接，构成数据链路数据单元，帧（Frame），并对帧进行同步，首发顺序的控制。

链路层会在 frame 尾部加上放置码（CRC）来检测内容

**交换机**是本层设备

## 基本问题

### 1.封装成帧

封装成帧就是在一段有效的数据前后加上首部和尾部，来构成一个帧

帧定界，使用俩个控制字符作为首部和尾部的标识，首部为 SOH 尾部为 EOT。

### 2.透明传输

在帧的有效数据中，可能会出现和帧定界控制字符一样的字符，为了防止错误的将这些字符作为帧定界，发送端链路层会在有效数据部分出现的控制字符的前面插入一个转义字符，如果转义字符也出现在数据中，则在前面再插入一个转义字符。发送端链路层会删除插入的转义字符。

该过程对用户不可见，所以为透明传输。

### 3.差错检查

链路层使用 循环冗余检验（CRC）来检测比特差错

## 信道分类

### 广播信道

一对多通信，一个节点发送的数据能被广播信道上的所有节点接受

所有节点在同一个广播信道发送数据，因此需要方法来避免冲突

方法：
1.信道复用技术
2.CSMA/CD 协议


### 点对点信道

一对一通信，使用 PPP 协议进行控制


## 信道复用技术

### 频分复用

频分复用的主机在同一时间的占用不同频率带宽资源

### 时分复用

时分复用的主机在不同时间占用相同带宽资源

## 统计时分复用

对时分复用改进，不固定用户的位置。

## 波分复用

光的频分复用

## 码分复用

为用户分配 m bit 的码片，并且所有码片正交。

用户想要发送 比特 1 时，就发送改码片，发送 比特 0 时就发送该码片的反码

数据量为原来的 m 倍


## PPP协议

互联网需要连接到某个 ISP（互联网服务提供商） 之后才能接入互联网，PPP 协议就是用户计算机和 ISP 进行通信时所使用的链路层协议

## MAC地址

MAC 地址是链路层地址，长度为 6 字节（48位），用于唯一标识网络适配器（网卡）

一个电脑可能有多个网卡，因此有多个 MAC 地址。

## 交换机

交换机有自学习功能，学习的是交换表的内容，交换表中存储着 MAC 地址到接口的映射

A 向 B 发送数据时，交换机会把 A 的 MAC 和接口1对应，再在交换表中查找 B 映射，如果有则直接发送。如果没有则 A 发送广播帧，B 得到该帧，并向 A 发送数据包，交换机就会记录 B 的 MAC 地址